.contexts:
  - &subcommand ^(git\s+exec\s+)?(npm|pnpm)\s+\S+$
  - &install ^(git\s+exec\s+)?(npm|pnpm)\s+install\s

abbrevs:
  - name: npm i
    abbr: i
    snippet: install
    global: true
    context: *subcommand

  - name: npm -D
    abbr: -D
    snippet: --save-dev
    global: true
    context: *install

  - name: <npx>
    abbr-pattern: ""
    snippet: npx $abbr
    evaluate: true
    if: >
      (( ! ${+commands[$abbr]} && ! ${+functions[$abbr]} && ! ${+aliases[$abbr]} && ! ${+builtins[$abbr]} ))
      && [[ -x "$(monkeywrench node toplevel --root)/node_modules/.bin/$abbr" ]]
